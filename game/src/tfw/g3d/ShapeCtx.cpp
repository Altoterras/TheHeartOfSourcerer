/***********************************************************************//**
 *  ShapeCtx.cpp
 *  Terras Framework
 *
 *  Created by Ryoutarou Kishi on 2009/12/29.
 *  Copyright 2009 Altoterras Corporation. All rights reserved.
 *
**//***********************************************************************/

////////////////////////////////////////////////////////////////////////////
// インクルードファイル

// Base

// Self
#include "ShapeCtx.h"

// Friends
#include "Material.h"
#include "MaterialCtx.h"

// External

// Library

////////////////////////////////////////////////////////////////////////////

TFW_BEGIN_NS

////////////////////////////////////////////////////////////////////////////
// クラス

//==========================================================================
// ShapeCtx メソッド

// - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
// 内部制御

/*---------------------------------------------------------------------*//**
	コンストラクタ
**//*---------------------------------------------------------------------*/
ShapeCtx::ShapeCtx()
	: _mtrlctx(0L)
{
}

/*---------------------------------------------------------------------*//**
	デストラクタ
**//*---------------------------------------------------------------------*/
ShapeCtx::~ShapeCtx()
{
	ASSERT(_mtrlctx == 0L);
}

/*---------------------------------------------------------------------*//**
	作成
**//*---------------------------------------------------------------------*/
bool ShapeCtx::create(Material* mtrl)
{
	if(mtrl != 0L)
	{
		_mtrlctx = new MaterialCtx();
		if(!mtrl->createContext(_mtrlctx))
		{
			destroy();
			return false;
		}
	}

	return true;
}

/*---------------------------------------------------------------------*//**
	破棄
**//*---------------------------------------------------------------------*/
void ShapeCtx::destroy()
{
	if(_mtrlctx != 0L)
	{
		_mtrlctx->destroy();
		delete _mtrlctx;
		_mtrlctx = 0L;
	}
}

////////////////////////////////////////////////////////////////////////////

TFW_END_NS