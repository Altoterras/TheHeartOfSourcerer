/***********************************************************************//**
 *  MaterialCtx.cpp
 *  Terras Framework
 *
 *  Created by Ryoutarou Kishi on 2009/12/29.
 *  Copyright 2009 Altoterras Corporation. All rights reserved.
 *
**//***********************************************************************/

////////////////////////////////////////////////////////////////////////////
// インクルードファイル

// Base

// Self
#include "MaterialCtx.h"

// Friends
#include "../gcmn/Texture.h"
#include "../gcmn/TextureCtx.h"

// External

// Library

////////////////////////////////////////////////////////////////////////////

TFW_BEGIN_NS

////////////////////////////////////////////////////////////////////////////
// クラス

//==========================================================================
// MaterialCtx メソッド

// - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
// 内部制御

/*---------------------------------------------------------------------*//**
	コンストラクタ
**//*---------------------------------------------------------------------*/
MaterialCtx::MaterialCtx()
	: _texctx(0L)
{
}

/*---------------------------------------------------------------------*//**
	デストラクタ
**//*---------------------------------------------------------------------*/
MaterialCtx::~MaterialCtx()
{
	ASSERT(_texctx == 0L);
}

/*---------------------------------------------------------------------*//**
	作成
**//*---------------------------------------------------------------------*/
bool MaterialCtx::create(Texture* tex)
{
	if(tex != 0L)
	{
		_texctx = new TextureCtx();
		if(!tex->createContext(_texctx))
		{
			destroy();
			return false;
		}
	}

	return true;
}

/*---------------------------------------------------------------------*//**
	破棄
**//*---------------------------------------------------------------------*/
void MaterialCtx::destroy()
{
	if(_texctx != 0L)
	{
		_texctx->destroy();
		delete _texctx;
		_texctx = 0L;
	}
}

////////////////////////////////////////////////////////////////////////////

TFW_END_NS