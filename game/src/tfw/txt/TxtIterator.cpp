/***********************************************************************//**
 *  TxtIterator.cpp
 *  Terras Framework
 *
 *  Created by Ryoutarou Kishi on 2011/11/27.
 *  Copyright 2011 Altoterras Corporation. All rights reserved.
 *
**//***********************************************************************/

////////////////////////////////////////////////////////////////////////////
// インクルードファイル

// Base

// Self
#include "TxtIterator.h"

// Friends
#include "Txt.h"

// External

// Library

////////////////////////////////////////////////////////////////////////////

TFW_BEGIN_NS

////////////////////////////////////////////////////////////////////////////
// クラス

//==========================================================================
// メソッド

/*---------------------------------------------------------------------*//**
	文字を持っているかどうか
**//*---------------------------------------------------------------------*/
bool TxtIterator::has() const
{
	return _txtRef->isValidCharPos(this);
}

/*---------------------------------------------------------------------*//**
	文字位置を進める
**//*---------------------------------------------------------------------*/
bool TxtIterator::next()
{
	return _txtRef->nextPos(this);
}

/*---------------------------------------------------------------------*//**
	文字戻すを進める
**//*---------------------------------------------------------------------*/
bool TxtIterator::prev()
{
	return _txtRef->prevPos(this);
}

/*---------------------------------------------------------------------*//**
	現時あの文字を得る
**//*---------------------------------------------------------------------*/
TxtChar TxtIterator::cur()
{
	TxtChar tc;
	_txtRef->getAt(&tc, this);
	return tc;
}

// - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
// 内部制御

/*---------------------------------------------------------------------*//**
	コンストラクタ
**//*---------------------------------------------------------------------*/
TxtIterator::TxtIterator(const Txt* txtRef)
	: _txtRef(txtRef)
{
}

/*---------------------------------------------------------------------*//**
	コンストラクタ
**//*---------------------------------------------------------------------*/
TxtIterator::TxtIterator(const Txt* txtRef, u32 indexRaw, u32 indexChar)
	: TxtPos(indexRaw, indexChar)
	, _txtRef(txtRef)
{
}

/*---------------------------------------------------------------------*//**
	コンストラクタ
**//*---------------------------------------------------------------------*/
TxtIterator::TxtIterator(const Txt* txtRef, const TxtPos* pos)
	: TxtPos(*pos)
	, _txtRef(txtRef)
{
}

/*---------------------------------------------------------------------*//**
	コピー コンストラクタ
**//*---------------------------------------------------------------------*/
TxtIterator::TxtIterator(const TxtIterator& src)
{
	copy(&src);
}

/*---------------------------------------------------------------------*//**
	コピー
**//*---------------------------------------------------------------------*/
void TxtIterator::copy(const TxtIterator* src)
{
	TxtPos::copy(src);
	_txtRef = src->_txtRef;
}

////////////////////////////////////////////////////////////////////////////

TFW_END_NS