/***********************************************************************//**
 *	StopWatch.cpp
 *	Enlight Windows Application
 *	
 *	Created by Ryoutarou Kishi on 2009/09/11.
 *	Copyright 2009 Altoterras Corporation. All rights reserved.
 *
**//***********************************************************************/

////////////////////////////////////////////////////////////////////////////
// インクルードファイル

//--------------------------------------------------------------------------
// Basic

#include "BasicInclude.h"

//--------------------------------------------------------------------------
// Self

#include "StopWatch.h"

//--------------------------------------------------------------------------
// External

////////////////////////////////////////////////////////////////////////////
// クラス

namespace app
{

//==========================================================================
// StopWatch メソッド

/*---------------------------------------------------------------------*//**
	コンストラクタ
**//*---------------------------------------------------------------------*/
StopWatch::StopWatch()
	: _start(0)
	, _period(0.0f)
{
}

/*---------------------------------------------------------------------*//**
	計測開始
**//*---------------------------------------------------------------------*/
void StopWatch::start()
{
	__int64	freq;
	::QueryPerformanceFrequency((LARGE_INTEGER*)&freq);
	if(freq != 0)
	{
		_period = 1.0f / (f32)freq;
	}

	::QueryPerformanceCounter((LARGE_INTEGER*)&_start);
}

/*---------------------------------------------------------------------*//**
	経過時間を得る
**//*---------------------------------------------------------------------*/
f32 StopWatch::getElapsedSeconds()
{
	__int64	now;
	::QueryPerformanceCounter((LARGE_INTEGER*)&now);

	return (now - _start) * _period;
}

}	// namespace app
